---
path: "project/playpick"
title: "01__플레이픽"
type: "project"
summary: "코디 결정장애 해결 플랫폼"
thumbnail: ""
time: "2018.8 ~ 2019.3"
platform: "WEB"
tech: "React,ExpressJS,MongoDB,Firebase"
link: "https://appadvice.com/app/ed-94-8c-eb-a0-88-ec-9d-b4-ed-94-bd-ec-bd-94-eb-94-94-ea-b2-b0-ec-a0-95-ec-9e-a5-ec-95-a0-ed-95-b4-ec-86-8c/1418537860"
repository: ""
---
![플레이픽](https://drive.google.com/uc?export=download&id=16YIEYZh4toCHhMTsjSTaLU_UXjMWhHyu)

### 프로젝트에 대한 이야기
코디 결정장애를 해결하기 위해 여러 대중을 상대로 투표를 받을 수 있는 모바일 어플리케이션.

가장 처음 스타트업에 들어가서 진행한 프로젝트로, 그때의 나는 아무것도 모르는 아기개발자였다.

처음엔 글 올라오는 걸 확인, 삭제가 가능한 관리자 백오피스를 개발해야 했는데, 내 스스로가 뭘하는 지 하나도 모르겠고, 신선놀음에 도끼자루 썩는 줄 모르고 이것저것 만져가며 했다. 결국 실패했지만.

그렇게 예열하고 있는 중에, 대표 개발자가 버전 1을 완성해서 나에게 SEO를 맡겨봤다. 그래서 백오피스는 영원히 완성되지 못하고 역사의 뒤안길로 사라졌다.

SEO는 애초에 개념조차 없던 내용이라, 구글의 검색엔진 작동, SEO의 점수를 높일 수 있는 방법, robot.txt의 용도 등 SEO에 대해서도 어느정도 알게되었지만, 그것도 잠시.

버전2를 개발하게 되었다. 사용한 프레임워크는 React Native. 자바스크립트도 제대로 할줄 몰랐고, Promise가 뭔지도 잘 몰랐으며, 글로벌 상태관리 Redux도 어떻게 작동하는지 하나도 몰랐지만, 버전 1의 코드를 보고 분석해가며 완성했다.

바로 버전2의 새로운 기능인 인터넷 쇼핑몰의 상품들을 보여주는 기능을 만들었어야 하는데, 크롤러를 통해 크롤링을 해와야 한다고 했다.

NodeJS와 Cheerio를 사용해서 만들어보라는 대표의 말에 Cherrio에 대해서 알아보니, 그냥 일반적인 `request`모듈로 url로 요청을 보내 문서를 받아오고 거기서 데이터를 추출하는 것이었다.

하나의 파일로 서로 다른 쇼핑몰에서 크롤링 해오는 것은 불가능 한 것 같았다. 그래서 사람들이 많이 들어오는 쇼핑몰 10개 정도를 추리고 그 중에서도 베스트셀러들을 가져오는 것으로 방향을 정했다.

각 쇼핑몰의 베스트셀러 페이지마다 다른 요소를 불러와야했고, 그 가짓수 마다 파일을 하나씩 만들어서 진행했다.

그래도 어떻게 인터넷 쇼핑몰들 크롤러를 만들었다. 매일마다 직접 실행시켜서 가져오는 것에도 한계가 있어서 Google Cloud Platform의 Pub/Sub에 Cron이 있는 것을 알고, 그것을 적용하기 위해 Cloud Functions에 코드를 올려 스케쥴러로 매일 불러올 수 있도록 등록했다.

하지만, 대표의 결단으로 프로젝트 중단하고, 피봇팅했다. 유저도 몇명 들어왔었는데, 기분이 참 좋더라.

### 개발한 기능
* 관리자 백오피스 : 40%정도 개발 후 중단
* 어플리케이션 ver.2 : 버전 1 코드 리팩토링 해보면서 개발
* 쇼핑몰 크롤러 : 미리 정의해둔 쇼핑몰 몇개에 대한 크롤러

### 사용한 기술 스택
* ReactJS : React로 해본 처음 프로젝트 다운 프로젝트였지만 완성을 못했다. 지금은 코드가 깃허브 어딘가를 떠돌고 있을까?
* Redux: 개념이 너무 어려워서 버전 1 코드를 거의 그대로 썼던것 같다. 여기서 느낀게 나는 이미 있는 코드를 응용하는 건 꽤 하는 것 같았다.
* React Native : 코딩 자체는 뭐 그냥저냥 했는데, 안드로이드 오류, iOS 오류가 날 너무 정신없게 했다. 어떻게 어떻게 해결은 했지만, 고된 일이었다.
* ExpressJS : 백엔드 API 만드는데 사용했었다. HTTP Rest API 개념 자체는 쉽게 와닿아서 큰 어려움은 없었다.
* MongoDB : DB로 처음 입문했는데, 그때는 NoSQL, RDB, SQL이 뭔지도 몰랐다. 그냥 데이터 구조대로 넣고 쿼리로 가져오고 이 정도만 받아들였다.
* Firebase : MongoDB를 사용하다가 이게 사용하기는 더 편해서 Firestore로 중간에 갈아탔다. 처음엔 AWS 사용했는데, 구글이 문서가 훨씬 잘되있는 것 같다.
* Cheerio : 쇼핑몰마다 html에서 필요한 데이터를 다르게 해주는게 불편했다.

![Stacks](https://user-images.githubusercontent.com/35324795/114304147-9d8b5880-9b0c-11eb-9086-c6d9a71dba08.png)

### 프로젝트하면서 겪은 이슈와 해결방법
좀 오래되어 기억이 정확하게 나지는 않는다.

크롤러를 만드는 중에, 현실적으로 인터넷의 모든 쇼핑몰을 다 찾아서 크롤링 하는 것도 불가능 했고, 자연어 처리로 의미있는 정보만 자동으로 불러오는 모델을 만드는 것도 불가능했다. 그래서 선택한게 가장 인기있는 상품들만을 불러오기로 했고,
그렇게 선별한 쇼핑몰의 선별된 베스트셀러만을 크롤링 해오는 것이었다. 문제가 두가지 있었는데,

하나는, 쇼핑몰 하나마다 다르게 코드를 썼어야 하는데, 그러면 쇼핑몰 마다 다 다른 크롤러를 코딩했어야 하는가?

가장 처음 코딩을 할 때는 실행의 진입점이 되는 `index.js` 하나만 공유를 하고 쇼핑몰 마다 다 다른 폴더를 만들어서 의미있는 데이터만을 분리하는 로직과 파일을 넣었다. 그렇지만 중간에 코딩하다가 request를 보내서 받아오는 것과 같이 공통된 부분에 에러가 발생할 경우 모든 폴더의 파일을 수정해야 하는
불상사가 발생했다. 그래서 공통되는 부분은 최대한 하나로 합치면서 함수의 역할에 대해서 다시 생각해보게 되었다. 이때는 전역한지 1년 되고 프로그래밍을 배우기 시작한지 1년된 꼬꼬마 개발자라 함수형 프로그래밍이 뭔지, 함수의 개념이 어떤건지 잘 모르던 시절이라 공통되는 건 하나로 합친다는 그런 개념에 대해서
생각해본 계기가 되었던 것 같다. 어떻게 공통되는 부분을 따로 하나의 파일로 빼내고 그 파일을 공유하면서 url들도 하나의 파일로 빼내는 것과 같이 모듈화를 어느정도 진행했다. 지금 생각해보면 그래도 개발에 대한 적성이 어느정도 있었는 것 같다.

두번째는, 매일 실행을 시켜줘야 했다.

처음 몇일은 손수 일정한 시간에 `node index`로 실행을 시켰는데, 언제까지 이렇게 하는 것은 아니라고 생각해서 여러가지 방법을 생각해봤다.
`setInterval`함수로 하루 86400초 주기로 계속 실행시켜놓을까? 라는 생각을 가장 먼저 했는데, 그건 컴퓨터가 꺼지면 다시 켜줘야 하고 주기 맞추기도 좀 그래서 포기했다. 구글링을 좀 해보니 마침 우리가 사용하고 있던 Firebase의 상위 개념인 Google Cloud Platform에 Cloud Functions와 연동해서 cron(시스템 예약작업)이 있었다.
그래서 거기에서 시간을 등록하고 올렸는데, 이때 Cloud Functions를 이용해보면서 서버리스 플랫폼에 대한 경험을 해볼 수 있었다. 백엔드 부분이라 이런걸 하나하나 손수 구현하는 게 시간이 정말 많이 들것 같지만, 이렇게 클라우드 플랫폼에서 다양한 기능을 제공해줘서 참 편하게 서비스를 만들 수 있었다.

React Native로 모바일 어플리케이션을 만들면서 안드로이드, iOS 문제로 빌드가 실패하는 경우가 많았다. 정확한 에러가 어떤게 있었는지는 기억은 나지 않지만, 구글링해보니까 대부분 나왔다. 안나오는 것도 유사한 에러를 통해서 이리저리 뜯어보니 해결이 되긴 되더라.
그러면서 아, 구글링은 이렇게 하는 거구나 깨달음의 시작이었다.
